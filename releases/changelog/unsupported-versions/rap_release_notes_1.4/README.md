# 1.4

### Enhancements

| VSTS ID | Description | Impact | Risks |
| :--- | :--- | :--- | :--- |
| 41615 | Cleanup Actor now follows long running actor model, and runs using the process queue; Cleanup Actor also now schedules using a Cron expression | Using the process queue allows us to run the Cleanup process at a lower priority than the other processes, enabling the platform to only run the Cleanup process when nothing else is in the process queue or is running. | Medium - This is a change to the Cleanup processing logic, but should not affect standard processing |
| 41548 | Agent now is able to move files greater than 5GB | AWS Multipart Upload is now used as the upload type for files to S3. Previously, sources would fail the input step with the original method we used to upload to S3. | Low - Input processing has not changed, just the library used for file uploads to S3 |
| 41512 | Output\_send\_id is now included in system output columns for table output | Having output\_send\_id on table output gives developers, and especially support teams, another way to track output processing in RAP. | Limited/None - Net new column added to output query that has no ties to table delete logic |
| 41271 | UI previously didn't show Wait symbol for a Time Series input \(purple pause icon\) when it was waiting in dependency queue | If a Time Series source was waiting on a dependency it would show the blue ready symbol. This was confusing for developers and anyone assessing the health of the daily loads. The purple wait icon is a much more accurate icon for the processing status. | Limited/None - This is solely a visual change to the UI |
| 41264 | Vrb\_id is now viewable in Validation and Enrichment tabs | When looking at the data viewer to see failed or warned records, there was no way to tie them back to the Validation or Enrichment rules that triggered the fail or warning. Now the user can easily use the vrb\_id in the data viewer and the Validation and Enrichment tabs. | Limited/None - This is a visual update and does not affect processing |
| 40845 | Added case classes to Staging Actor and made line terminator casting more dynamic | These two are tech debt updates, and were necessary to progress forward with future Staging enhancements. | Low - Affects backend code organization with no processing functionality added |
| 40766 | Added Metadata Refresh capability to from UI to Wait Actor | If a source had an input that was waiting on a dependency to resolve before running the V&E step, it wouldn't be released if the dependency was changed or deactivated. Now, the UI will send a message to the Orchestrator in that scenario, and the Orchestrator will attempt to release the input from the dependency queue. | Low - This is an edge case issue, but did cause sources to halt processing when they should have progressed |
| 40765 | Complex Lookups functionality added to Validation and Enrichment processing | Complex Lookups are a big enhancement to Validation and Enrichment processing. Now, for less performant lookup joins, a lookup table will be cached on the backend. This table will then be taken care of by the Orchestration, and used during the Validation and Enrichment step. | High - This is a major change to Validation and Enrichment processing |
| 39716 | Ability to identify a Time Series "range" that is not a date for Time Series sources | This enhancement adds the ability for Time Series sources to no longer live on the date grain for their events. Now, the data can be identified by a numeric, which is referred to as a Sequence. Also, the Time Series type can also be none, which is useful for exploratory data. | Medium - This is a change to core processing for staging and output range deletes |
| 37099 | User defined connections have been segmented out of sources and into a new screen in the UI | Previously, all user defined connections such as SQL Server, SFTP, and others had to be configured on a source by source basis. Now, the user can configure that connection once and reuse it for any new source that is created. | Medium - This update is cosmetic but requires a remapping of all source's connections during deployment |
| 41947 | When an input file contains multiple rows with the same key value, it now automatically picks the value with the most recent CDC date | This enhancement allows CDC to be performed within a single file, which is a huge benefit for historical keyed files. | Medium - Affects CDC processing, but only affects files which have multiple rows with the same key value |
| 41509 | SFTP performance improvements made to increase resilience and speed | The SFTP library being used previously was very slow and unstable in the platform. Now, SFTP will write a file to a user-defined local path in S3, and then transfer the file from S3 to the SFTP server. The previous transfer was running as slow as 0.5 MB/s - we're now seeing around 8 MB/s with the new method. | Medium - This is an overhaul of the SFTP output code, so SFTP sources need to be updated to add the local path parameter in |

### Bugfixes

| VSTS ID | Description | Impact | Risks |
| :--- | :--- | :--- | :--- |
| 41633 | File and SFTP Outputs were not displaying error logs correctly | When a File or SFTP Output failed, it would show up on the input screen as failed, but wouldn't show the error to the user, making it very difficult to understand the issue. | Limited/None - This is a visual bug, that only occurs when a process has already failed |
| 41320 | Output file paths trim trailing spaces and no longer error if  is not included at end of file path | This bug helps users by adding more protection against bad user input, and keeps the user from having to follow unwritten rules around file path formatting. | Low - Affects where Output can write files, so user can still put in bad input if they aren't careful |
| 41614 | Time series source does not wait eternally during dependency check | This issue was caused by an edge case in the dependency check logic. It affected Time Series sources that were trying to do the dependency check while one of their lookup sources was still processing. | Low - Affects processing workflow but does not change actual processing methodology |
| 41467 | Wait agent no longer pulls intervals from random sources during dependency checks | Having random intervals be pulled could cause some sources to wait longer than they should have in the dependency check step. | Low - Affects processing workflow but does not change actual processing methodology |
| 41016 | Changing the source dashboard status filter now displays which status is chosen | Incorrect displays on the Source Dashboard page made users confused and less likely to adopt and regularly use the Source Dashboard. | Limited/None - UI update that is purely cosmetic |
| 40487 | Large enrichment queries no longer run out of space on disk in Postgres | This is fixed by the implementation of the Complex Lookups enhancement, and will save teams from doing workarounds when confronting complex enrichment scenarios. | High - This is a major change to Validation and Enrichment processing |
| 40334 | Automap functionality no longer causes unexpected remapping in UI | This bug was an annoyance to users that were trying to create Output column mappings. The resolution will reduce frustration around the Output column mapping process, and increase adoption. | Limited/None - UI update that is purely cosmetic |
| 39142 | Cleanup actor no longer fails to move files that are larger than 5 GB in size | AWS Multipart Upload is now used as the upload type for files to S3. This is essentially the same change we made in the Agent to add the new library. | Low - Added a new library used for file uploads but logic behind uploading files is the same |
| 41895 | Agent no longer duplicates table pulls | A bug was found that caused the Agent to start pulling a new input when a previous one was in progress. This caused a confusing issue where the user would see duplicate pulls on the inputs page. | Low - Quick logic fix in how the Agent schedules new inputs |
| 40223 | Table output now displays more informative errors when SQL Server Bulk Output fails | Previously, the actual error was hidden, while the user would see "Timeout on waiting for new data" in the logs. This was difficult for users to troubleshoot and support. | Low - Mostly visual, involving how errors are communicated to the user via logs |

### Legend

| Severity | Description |
| :--- | :--- |
| High | Possible reporting outage, service disruption, or critical processing failure upon failed deployment or bug in the code |
| Medium | Change in methodology to a core processing algorithm, where performance may shift based off of pipeline logic |
| Low | Modification to any core processing logic to fix a known issue, but does not change performance or actual processing algorithm |
| Limited/None | Process tracking fixes, orchestration, or UI only bugs |

